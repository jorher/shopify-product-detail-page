document.addEventListener('DOMContentLoaded', function() {
    const mediaItems = document.querySelectorAll('.product__media-item');

    // Check if media items are found
    if (!mediaItems.length) {
        console.error('Media items not found');
        return;
    }

    console.log('Media Items Found:', mediaItems);

    // Function to update media based on selected color
    function updateMedia(selectedColor) {
        console.log('Updating media for selected color:', selectedColor);

        // Hide all media items first
        mediaItems.forEach(item => {
            item.style.display = 'none'; // Hide all items
        });

        // Show only the media item that matches the selected color
        mediaItems.forEach(item => {
            const mediaColor = item.getAttribute('data-color');
            console.log('Media item color:', mediaColor);
            item.style.display = mediaColor === selectedColor ? 'block' : 'none';
        });
    }

    // Use event delegation to handle dynamically loaded content
    document.body.addEventListener('change', function(event) {
        // Check if the target of the event is a variant selector
        if (event.target.matches('.variant-selector')) {
            const selectedVariant = document.querySelector('.variant-selector:checked');
            console.log('Selected Variant:', selectedVariant);
            if (selectedVariant) {
                updateMedia(selectedVariant.value);
            } else {
                console.log('No variant is selected.');
            }
        }
    });

    // Initialize media based on the currently selected radio button
    const selectedRadio = document.querySelector('.variant-selector:checked');
    if (selectedRadio) {
        console.log('Initial selected radio:', selectedRadio.value);
        updateMedia(selectedRadio.value);
    } else {
        console.log('No radio button is initially selected.');
    }
});
